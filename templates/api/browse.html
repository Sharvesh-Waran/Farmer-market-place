{% extends 'core/base.html' %}

{% block title %}Items{% endblock %}
{% block content %}
    <div class="pb-6 grid grid-cols-4 gap-4">
        <div class="col-span-1">
            Side bar
        </div>

        <div class="col-span-3">
            <div class="mt-6 px-6 py-12 bg-gray-100 rounded-xl">
                <h2 class="mb-12 text-2xl text-center">Browse</h2>

                <!-- This div will hold the dynamically fetched items -->
                <div id="transactions-list" class="grid grid-cols-3 gap-3 bg-gray-100">
                    <!-- Dynamic content will be inserted here -->
                </div>

            </div>
        </div>
    </div>

    <script>
        // Fetch JSON data from the API endpoint
        fetch('/api/v1/items/')
            .then(response => response.json())
            .then(data => {
                const list = document.getElementById('transactions-list');

                data.data.forEach(item => {
                    // Create the transaction card dynamically
                    const transactionDiv = document.createElement('div');
                    transactionDiv.classList.add('p-6', 'bg-white', 'rounded-b-xl');

                    // Add transaction details
                    transactionDiv.innerHTML = `
                        <a href="/items/${item.id}">
                            <h2 class="text-2xl">${item.product_name}</h2>
                            <p class="text-gray-500">Price: ${item.price} Rs</p>
                            <p class="text-gray-500">Quantity: ${item.quantity} Kg</p>
                        </a>
                    `;
                    list.appendChild(transactionDiv);
                });
            })
            .catch(error => {
                console.error('Error fetching transactions:', error);
            });
    </script>
{% endblock %}
